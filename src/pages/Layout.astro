---
// src/layouts/Layout.astro
import NavMain from '../components/NavMain.astro';
import NavSubpage from '../components/NavSubpage.astro';

const { title, description, isHomepage = false } = Astro.props;
---

<html lang="cs" class="scroll-smooth">
  <head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-2T6BZG4P9V"></script>
    <script is:inline>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-2T6BZG4P9V');
    </script>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>{title}</title>
    <meta name="description" content={description}>
    
    <link rel="icon" type="image/png" href="/favicon.png" />
    <link rel="apple-touch-icon" href="/favicon.png" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Oswald:wght@400;600;700&family=Montserrat:wght@900&display=swap" rel="stylesheet">

    <meta name="keywords" content="stavba domu, rekonstrukce, vodo topo, elektroinstalace, zednické práce, Zlínský kraj, Tichov, Valašsko, Dům na klíč, Podlahové vytápění, Tepelná čerpadla, zabezpečovací systémy, elektro, zedník, elektrikář, instalatér">
    <meta name="author" content="JDJ-craft">
    <link rel="canonical" href="https://www.jdj-craft.cz/" />

    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.jdj-craft.cz/" />
    <meta property="og:title" content="JDJ-craft | Stavby a rekonstrukce na klíč" />
    <meta property="og:description" content="Stavíme domy na pevných základech. Hrubá stavba, voda, topení, elektro a zednické práce pod jednou střechou." />
    <meta property="og:image" content="https://www.jdj-craft.cz/og-image.jpg" />
    <meta name="theme-color" content="#C64936">

    <style>
        @keyframes marquee {
          from { transform: translateX(0); }
          to { transform: translateX(-50%); }
        }
        .animate-marquee {
          animation: marquee 40s linear infinite;
        }
    </style>
  </head>
  
  <body class="bg-brand-black text-gray-100 font-body antialiased selection:bg-brand-brick selection:text-white">

    {isHomepage ? <NavMain /> : <NavSubpage currentUrl={Astro.url} />}

    <main>
        <slot />
    </main>

    <footer class="bg-brand-black py-8 border-t border-white/5">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="text-gray-600 text-sm">
                &copy; <span id="copyright-year">2025</span> JDJ-craft s.r.o. | Všechna práva vyhrazena.
            </p>
        </div>
    </footer>

    <script>
        const btn = document.getElementById('mobile-menu-btn');
        const menu = document.getElementById('mobile-menu');

        if (btn && menu) {
            const closeMenu = () => {
                menu.classList.remove('max-h-96', 'opacity-100');
            };

            btn.addEventListener('click', (e) => {
                e.stopPropagation();
                menu.classList.toggle('max-h-96');
                menu.classList.toggle('opacity-100');
            });

            menu.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', closeMenu);
            });

            document.addEventListener('click', (e) => {
                if (!menu.contains(e.target as Node) && e.target !== btn) {
                    closeMenu();
                }
            });
            
            window.addEventListener('scroll', closeMenu);
        }

        const yearEl = document.getElementById('copyright-year');
        if (yearEl) {
            yearEl.textContent = new Date().getFullYear().toString();
        }
    </script>

  </body>
</html>